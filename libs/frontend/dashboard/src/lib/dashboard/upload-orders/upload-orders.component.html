<ng-container
  *ngrxLet="{
    error: uploadOrdersStore.error$ | ngrxPush,
    loading: uploadOrdersStore.loading$ | ngrxPush,
    inboundOrderDetails$: uploadOrdersStore.inboundOrderDetails$ | ngrxPush,
    getInboundOrdersByRoute$: uploadOrdersStore.getInboundOrdersByRoute$ | ngrxPush,
  } as vm"
>
  @if (router.url.includes('/ordenes-procesadas')) {
  <router-outlet></router-outlet>
  } @else {
  <div class="container">
    <div class="routes-preview">
      <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
        <mat-tab label="Desglose">
          <div class="accordion-scrollable-container">
            <mat-accordion>
              @for (inboundOrderRoute of vm.getInboundOrdersByRoute$; track
              inboundOrderRoute.route) {
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <div>Ruta {{ inboundOrderRoute.route }}</div>
                    <div>
                      {{ inboundOrderRoute.orders.length }}/
                      {{ moofyToWalmartRoutes[inboundOrderRoute.route].length }}
                    </div>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-radio-group
                  aria-labelledby="example-radio-group-label"
                  class="example-radio-group"
                >
                  @for (inboundOrder of inboundOrderRoute.orders; track
                  inboundOrder.DocumentId) {
                  <mat-radio-button
                    class="example-radio-button"
                    [value]="inboundOrder"
                    (change)="
                      onInboundOrderSelected(inboundOrder);
                      uploadOrdersStore.getInboutOrderDetails$($event.value)
                    "
                  >
                    <!-- (change)="uploadOrdersStore.getInboutOrderDetails$($event.value)" -->
                    {{ 'Supercenter ' + inboundOrder.Location }}
                  </mat-radio-button>
                  }
                </mat-radio-group>
              </mat-expansion-panel>
              }
            </mat-accordion>
          </div>

          <div class="display-order-details-container">
            <!-- <div class="no-selection">Selecciona una ruta para ver datos</div> -->

            @if (vm.inboundOrderDetails$) {
            <moofy-purchase-order-breakdown
              [purchaseOrder]="selectedInboundOrder()"
              [purchaseOrderDetails]="vm.inboundOrderDetails$"
              [loading]="vm.loading || false"
            />
            }
          </div>
        </mat-tab>
        <mat-tab label="Totales">
          <div class="accordion-scrollable-container">
            <mat-accordion>
              <mat-radio-group
                aria-labelledby="example-radio-group-label"
                class="example-radio-group"
              >
                <mat-radio-button
                  class="example-radio-button"
                  [value]="'Total General'"
                >
                  {{ 'Total General' }}
                </mat-radio-button>

                @for (season of [1, 2, 3, 4, 5, 6]; track season; let i =
                $index) {
                <mat-radio-button class="example-radio-button" [value]="season">
                  {{ 'Ruta' }} {{ i }}
                </mat-radio-button>
                }
              </mat-radio-group>
            </mat-accordion>
          </div>

          <div class="display-order-details-container">
            <div class="display-order-details">
              <!-- <div class="no-selection">Selecciona una ruta para ver datos</div> -->

              <div class="supercenter">Ruta 1</div>

              <!-- <moofy-purchase-order-breakdown /> -->
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
  }
</ng-container>
